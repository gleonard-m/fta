os: linux
dist: xenial
language: python
python:
- '3.8'
services:
- postgresql
before_install:
- sudo apt-get update -qq
- sudo apt-get install -qq build-essential gettext python-dev zlib1g-dev libpq-dev
  xvfb
- sudo apt-get install -qq libjpeg8-dev libfreetype6-dev libwebp-dev
- sudo apt-get install -qq graphviz-dev python-setuptools python3-dev python-virtualenv
  python-pip
- sudo apt-get install -qq firefox automake libtool libreadline6 libreadline6-dev
  libreadline-dev
- sudo apt-get install -qq libsqlite3-dev libxml2 libxml2-dev libssl-dev libbz2-dev
  wget curl llvm
install:
- pip install -r requirements/local.txt
script:
- pre-commit run --all
- pytest -v
before_deploy:
- python deploy/pre_deploy_script.py
- ls -hal
- cat requirements.txt
- cat app.yaml
deploy:
  provider: gae
  keyfile: YOUR SERVICE ACCOUNT JSON FILE
  project: YOUR PROJECT ID
  skip_cleanup: true
  on:
    branch: main
env:
  global:
  - secure: HrKrqe/KJwT8/2FXYtR0zGnLEHNUX+SQGYPfIog+CJJ+jme9FQaWvPOWLHwoBUoyxJ7zO/FO6bBaytk+uiZ3shYwuIA3uoOM5bV56NccxwBdPzXsMNUfw1x4QFHelMgEQU9laImj4InhwPQiYSSHDysDGV7jEmoFhUhjPIVx5JDGJlbebm2ty+tqBw3/GK9ZbBCf1ZysmeY0Crgr+NeSTmyGiBsLUQ/7kbXmeTDN1BbJ447ITPuNrKfblIpo0Y4LcYyZU7vG84MCdsufPVqy09OvdnA2RjtnY2OAJCu5cUzcTskNGWvud1ln6qoCJen6obrJjYsv+bK0C6fI7YGtsDcIkzBMAE5El1+8selvsuRVxegGzTQwkTZqLmFX/Xez6v6h21BC6fSw2SDnuN9zScpHac5LQiT0sdzHL41a5Jcm/BpTDtpw/sl9+/YWAgym1HVwY4CYPiAonPS3kgynJI0kqfjBisb08emHzhnDeBPq9ATKS1pgmuVvRaEfkTm+ox7na/XkEZ3fxrdY7LLOwqe9ByQXczXUh45EFGiXHGmxQJmv7+yQ8hUsLWAZ7YhStfCCx0Ctbwz1rJr6C+O1eKgDRmp0Z8fW0BAPVoXYvZGa7GXRaRRt2YyCv+gDcoZcK8Bixxqq66VpuSg440jQp+6gkMZJ4vbvz/S1P+QSj54=
  - secure: io6Mmhl91MGHGX87FOzS/iJ4PhLA/zFvmZYTljh+8G9r4shES18EEo2RM8MwlImX5VqmYCseXItJ461834UY/oFx6Jn4bASdU1bH1+wQFiR5CXPPFATwNH6lHtT573faU54Vzh5Sr+XDOMB7sBJOsBWaaUdXtmpzio+S+lVL5KdGYnwMSTTQteY/5CTlmSUQ3O0KJZEzWMGXQMaOlTi7poNngHQI/EfS1Q/soC/YeIa8k9AW5kAEixoRSa5KYothRf7FCHrWZdWtCWiH5hg+ZRptIK6K8O5jHeqbGP5nMWQcbQO7UDGDlozbadMXRNczQl/QSBWQtT0x1V2VaZSZ2MDJtrBgAvccCnU3nGJP5sX5Z45WpYb1UjO7fbYnv5wXu+H6lSe5yV+lqgHs1ESvO3UEA9A5M6Wj+KcHs8izp45CKAaPBGFpX08ivmedauGRc1qXBpCNn/HzTrd9O0G4HtsnTaaopK8Qoq/6BnMZvGq/K97kr6AU7jp+QZ4igPFq9lcsv7qc9izEhaKdnpKXptaKqbB2b0C6C48acZpjrkY3ikcfbrGFuqwX6/CheBfgbG8Gxsq/YGRtV00Ua7pLzegGWyoYnr6Q7FXlQxxV43NPX1RA121uccPSq9kf9UR/fWuKOZ3/eruxbR/FX8nOEXf7KWbyPubSGKKc62cmVjs=
