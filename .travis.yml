os: linux
dist: xenial
language: python
python:
- '3.8'
services:
- postgresql
before_install:
- sudo apt-get update -qq
- sudo apt-get install -qq build-essential gettext python-dev zlib1g-dev libpq-dev
  xvfb
- sudo apt-get install -qq libjpeg8-dev libfreetype6-dev libwebp-dev
- sudo apt-get install -qq graphviz-dev python-setuptools python3-dev python-virtualenv
  python-pip
- sudo apt-get install -qq firefox automake libtool libreadline6 libreadline6-dev
  libreadline-dev
- sudo apt-get install -qq libsqlite3-dev libxml2 libxml2-dev libssl-dev libbz2-dev
  wget curl llvm
install:
- pip install -r requirements/local.txt
script:
- pre-commit run --all
- pytest -v
before_deploy:
- python deploy/pre_deploy_script.py
- ls -hal
- cat requirements.txt
- cat app.yaml
deploy:
  provider: gae
  keyfile: YOUR SERVICE ACCOUNT JSON FILE
  project: YOUR PROJECT ID
  skip_cleanup: true
  on:
    branch: main
env:
  global:
    secure: VBiVy/prtOxxG7ExmcBYUZeEX4Wnoi97QgY3Ti44l0loXFYRee3NJDHL9mRLRWPPjSE2nWuc65HOPywrh7SL/BoX0ky9W96arKYJS+tdI8bG44EZ05Bv2/aVosU5t039zWa1oQUL1us0mwAQfor9kmSIcNfhLMaGQEfdrBAtv3TENtZXgjlf8xwCIYYJgJlo8R5lGUOC1w9aNPTWspouO0NkMal2lPw1aOVkMOtEDSvQrAKiW/07gzEl1WIA6qK/hdljUa2E8snkY/k5439S3RF08cfmzyhOgTZYMZ83YOOLpxUmk8qpfQryD/DIWBQQjoBeUG1PBn3ltiJ+h+7cE327zv0addselD3rzHzQ2eKrsmAPZOQMzsGOsVt0mlcXyWPI7NJESwh3TS62k8/+qITdSyzeOK1JQFc9d1FpcWe2lluRaNqQrtLACWlW5348kFo8hqL6Tci2YB4grsCcEWOST+JbxkdUh501UtfQcAgEbl//NdUfdEJ1fY926CtBayhKda1dgQzpsBxmStymDKRwZkAeTA9kPnVa47oUbhrRKLOhUB9OoO3DE/NBCJ5DaNV3gD+0z0XjnX9PragTSJkHN6eF28pDBlnoOknGhpeGbB5JxztClJDj0dBgxoONDbfbREYb2EyROfrzIj4J6U3gWJJY+54q0EXRky5Hf7U=
